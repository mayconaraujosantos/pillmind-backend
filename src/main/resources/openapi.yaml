openapi: 3.0.0
info:
  title: PillMind API
  version: 1.0.0
  description: API for PillMind - Medication Management System
servers:
  - url: https://YOUR-RAILWAY-DOMAIN.railway.app
    description: Production (Railway)
  - url: http://localhost:7000
    description: Local Development
paths:
  /api/health:
    get:
      tags:
        - Health
      summary: Health Check
      description: Returns the health status of the API
      responses:
        "200":
          description: API is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  timestamp:
                    type: integer
                    format: int64
                    example: 1768693974131
  /api/signup:
    post:
      tags:
        - Authentication
      summary: User Sign Up
      description: Register a new user account
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - name
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  format: password
                  minLength: 8
                  example: SecurePass123
                name:
                  type: string
                  example: John Doe
      responses:
        "201":
          description: User created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    example: 1
                  email:
                    type: string
                    example: user@example.com
                  name:
                    type: string
                    example: John Doe
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: array
                    items:
                      type: string
        "409":
          description: User already exists
  /api/signin:
    post:
      tags:
        - Authentication
      summary: User Sign In
      description: Authenticate user and get JWT token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  format: password
                  example: SecurePass123
      responses:
        "200":
          description: Authentication successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      email:
                        type: string
                        example: user@example.com
                      name:
                        type: string
                        example: John Doe
        "400":
          description: Validation error
        "401":
          description: Invalid credentials
  /api/auth/google:
    post:
      tags:
        - Authentication
      summary: Google OAuth2 Sign In
      description: Authenticate user via Google OAuth2 and get JWT token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - idToken
              properties:
                idToken:
                  type: string
                  description: Google ID token
      responses:
        "200":
          description: Authentication successful
        "400":
          description: Validation error
        "401":
          description: Invalid token
  /api/profile:
    get:
      tags:
        - Profile
      summary: Get user profile
      description: Returns the authenticated user profile
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Profile data
        "401":
          description: Unauthorized
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
